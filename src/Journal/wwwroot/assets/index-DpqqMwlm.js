import{f as m,u as S,j as e,B as g,r as c,t as f}from"./index-Ba1SLRPW.js";import{D as b,a as y,E as N,b as P,c as T,d as A,e as k,f as x,u as j,g as z,R as E,P as G,h as p,i as B,j as L,k as R,l as V,m as F,n as C,B as O,T as U,o as W,p as D,q as v}from"./pagination-ZpCqLjQL.js";import{u as q}from"./get-muscle-C5oCyM9P.js";import{p as H}from"./index-otjVXVq-.js";import{u as $}from"./useMutation-CE6Q-hYt.js";import{A as K,a as Y,b as _,c as J,d as Q,C as X,e as Z,f as ee,g as se}from"./alert-dialog-i9u2STL_.js";import{I}from"./input-B0mGU3-H.js";import"./getErrorMessage-V6U41z_w.js";function ae(){const[a]=m(),t=te(a),{data:s,refetch:i,isLoading:n}=q(t);return{data:s,refetch:i,isLoading:n}}function te(a){const t=a.get("pageIndex"),s=a.get("pageSize");return{pageIndex:t?parseInt(t,10)-1:0,pageSize:s?parseInt(s,10):20,name:a.get("searchTerm")||void 0}}function ne({data:a,onClick:t}){const s=S();return e.jsxs(b,{children:[e.jsx(y,{asChild:!0,children:e.jsx(g,{size:"icon",variant:"ghost",children:e.jsx(N,{className:"h-4 w-4"})})}),e.jsxs(P,{className:"w-32",align:"start",children:[e.jsx(T,{className:"font-semibold",children:"Actions"}),e.jsx(A,{}),e.jsxs(k,{children:[e.jsx(x,{onClick:()=>navigator.clipboard.writeText(a.id),children:"Copy ID"}),e.jsx(x,{onClick:()=>s(`/muscles/${a.id}`),children:"Edit"}),e.jsx(x,{className:"group text-red-400",onClick:t,children:e.jsx("span",{className:"group-hover:text-red-500",children:"Delete"})})]})]})]})}async function re({muscleId:a}){const t=await H.delete("/muscles",{params:{id:a}});if(t.status!==204)throw new Error(`Error deleting exercise: ${t.statusText}`);return t.data}function ie(){return $({mutationFn:re,mutationKey:["delete-muscle"]})}function oe({open:a,onOpenChange:t,muscleId:s}){const[i,n]=c.useState(""),{mutate:l}=ie();function o(){navigator.clipboard.writeText(s)}function r(d){d||n(""),t(d)}function u(){l({muscleId:s},{onSuccess(){f.success("Muscle deleted successfully",{description:"Muscle deleted successfully"})},onError(d){f.error("Error deleting muscle",{description:d instanceof Error?d.message:"Unknown error"})}})}return e.jsx(K,{open:a,onOpenChange:r,children:e.jsxs(Y,{children:[e.jsxs(_,{children:[e.jsx(J,{children:"Confirm Deletion"}),e.jsx(Q,{asChild:!0,children:e.jsxs("div",{children:["This action is irreversible.",e.jsx("br",{}),"The entity with ID",e.jsxs("span",{className:"font-bold",children:[" ",s,e.jsx(g,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:o,children:e.jsx(X,{className:"h-4 w-4"})})]}),"will be permanently deleted from our servers.",e.jsx("br",{}),"To proceed, please re-enter the ",e.jsx("span",{className:"font-bold",children:"ID"})," below:",e.jsx("br",{}),e.jsx(I,{value:i,onChange:d=>n(d.target.value)})]})})]}),e.jsxs(Z,{children:[e.jsx(ee,{children:"No"}),e.jsx(se,{disabled:i!==s,onClick:u,children:"Yes"})]})]})},s)}function ce({refetch:a}){const t=S(),{update:s}=j(),[i,n]=c.useState(""),l=r=>{n(r),o(r)},o=c.useMemo(()=>z(r=>{s({searchTerm:r})},700),[s]);return c.useEffect(()=>()=>{o.cancel()},[o]),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(I,{placeholder:"Search muscles...",className:"max-w-sm",value:i,onChange:r=>l(r.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",onClick:()=>a(),children:[e.jsx(E,{className:"h-4 w-4"}),"Refresh"]}),e.jsxs(g,{onClick:()=>t("/muscles/create"),children:[e.jsx(G,{className:"h-4 w-4"}),"Create"]})]})]})}function le({totalItems:a}){const[t]=m(),{update:s}=j(),i=parseInt(t.get("pageSize")||"20",10),n=parseInt(t.get("pageIndex")||"1",10),l=c.useMemo(()=>Math.ceil(a/i),[a,i]),o=c.useMemo(()=>Array.from({length:l},(r,u)=>e.jsx(p,{children:e.jsx(B,{className:"cursor-pointer",onClick:()=>s({pageIndex:(u+1).toString()}),isActive:n===u+1,children:u+1})},u)),[n,l,s]);return e.jsx(L,{children:e.jsxs(R,{children:[e.jsx(p,{children:e.jsx(V,{className:"cursor-pointer",onClick:()=>s({pageIndex:Math.max(n-1,1).toString()})})}),o,e.jsx(p,{children:e.jsx(F,{className:"cursor-pointer",onClick:()=>s({pageIndex:Math.min(n+1,l).toString()})})})]})})}const w={pageIndex:1,pageSize:20};function de(){const[a]=m(),{update:t}=j(),{data:s,refetch:i,isLoading:n}=ae(),[l,o]=c.useState(!1),[r,u]=c.useState(null),d=c.useMemo(()=>[{field:"id",minWidth:200},{field:"name",width:150,flex:1},{field:"createdDate",width:150,valueFormatter:h=>C(h.value,"dd/MM/yyyy")},{field:"lastUpdated",width:150,valueFormatter:h=>C(h.value,"dd/MM/yyyy")},{field:"createdById",minWidth:200},{field:"updatedById",minWidth:200},{colId:"actions",headerName:"Actions",width:100,cellRenderer:ne,cellRendererParams:h=>({onClick:()=>{o(!0),u(h.data.id)},params:h})}],[]);return c.useEffect(()=>{const h=a.get("pageIndex"),M=a.get("pageSize");t({pageIndex:h??w.pageIndex.toString(),pageSize:M??w.pageSize.toString()})},[]),e.jsxs("div",{children:[e.jsx(ce,{refetch:i}),e.jsx("div",{className:"h-[calc(100vh-210px)] my-2",children:e.jsx(O,{data:s?.items||[],isLoading:n,colDefs:d,rowHeight:82})}),e.jsx(le,{totalItems:s?.all||0}),r&&e.jsx(oe,{open:l,onOpenChange:o,muscleId:r})]})}function Ce(){return e.jsx("div",{children:e.jsxs(U,{defaultValue:"data",children:[e.jsxs(W,{children:[e.jsx(D,{value:"data",children:"Data"}),e.jsx(D,{value:"schema",children:"Schema"})]}),e.jsx(v,{value:"data",children:e.jsx(de,{})}),e.jsx(v,{value:"schema",children:"Data Schema"})]})})}export{Ce as default};
