import{f as g,u as v,j as e,B as u,r as d}from"./index-Jes1nCj3.js";import{D as S,a as w,E as I,b as C,c as P,d as N,e as b,f as h,u as p,g as D,R as M,P as T,h as x,i as k,j as y,k as z,l as E,m as B,B as G,n as L,T as R,o as A,p as m,q as j}from"./pagination-BIzHvlZv.js";import{u as V}from"./get-exercise-W67RtiSH.js";import{B as W}from"./badge-Qfazmm_z.js";import{I as q}from"./input-Ch21jCgc.js";import"./getErrorMessage-DVxqjZy-.js";import"./index-otjVXVq-.js";function H(){const[a]=g(),t=U(a),{data:s,refetch:r,isLoading:n}=V(t);return{data:s,refetch:r,isLoading:n}}function U(a){const t=a.get("pageIndex"),s=a.get("pageSize");return{pageIndex:t?parseInt(t,10)-1:0,pageSize:s?parseInt(s,10):20,name:a.get("searchTerm")||void 0,description:a.get("searchTerm")||void 0,type:a.get("searchTerm")||void 0}}function F({data:a}){const t=v();return e.jsxs(S,{children:[e.jsx(w,{asChild:!0,children:e.jsx(u,{size:"icon",variant:"ghost",children:e.jsx(I,{className:"h-4 w-4"})})}),e.jsxs(C,{className:"w-32",align:"start",children:[e.jsx(P,{className:"font-semibold",children:"Actions"}),e.jsx(N,{}),e.jsxs(b,{children:[e.jsx(h,{onClick:()=>navigator.clipboard.writeText(a.id),children:"Copy ID"}),e.jsx(h,{onClick:()=>t(`/exercises/${a.id}`),children:"Edit"}),e.jsx(h,{className:"group text-red-400",onClick:()=>alert("Delete "+a.id),children:e.jsx("span",{className:"group-hover:text-red-500",children:"Delete"})})]})]})]})}function O({refetch:a}){const t=v(),{update:s}=p(),[r,n]=d.useState(""),i=o=>{n(o),c(o)},c=d.useMemo(()=>D(o=>{s({searchTerm:o})},700),[s]);return d.useEffect(()=>()=>{c.cancel()},[c]),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(q,{placeholder:"Search exercises...",className:"max-w-sm",value:r,onChange:o=>i(o.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",onClick:()=>a(),children:[e.jsx(M,{className:"h-4 w-4"}),"Refresh"]}),e.jsxs(u,{onClick:()=>t("/exercises/create"),children:[e.jsx(T,{className:"h-4 w-4"}),"Create"]})]})]})}function _({totalItems:a}){const[t]=g(),{update:s}=p(),r=parseInt(t.get("pageSize")||"20",10),n=parseInt(t.get("pageIndex")||"1",10),i=d.useMemo(()=>Math.ceil(a/r),[a,r]),c=d.useMemo(()=>Array.from({length:i},(o,l)=>e.jsx(x,{children:e.jsx(k,{className:"cursor-pointer",onClick:()=>s({pageIndex:(l+1).toString()}),isActive:n===l+1,children:l+1})},l)),[n,i,s]);return e.jsx(y,{children:e.jsxs(z,{children:[e.jsx(x,{children:e.jsx(E,{className:"cursor-pointer",onClick:()=>s({pageIndex:Math.max(n-1,1).toString()})})}),c,e.jsx(x,{children:e.jsx(B,{className:"cursor-pointer",onClick:()=>s({pageIndex:Math.min(n+1,i).toString()})})})]})})}const $={whiteSpace:"normal",lineHeight:"1.5",paddingTop:"8px",paddingBottom:"8px",overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2},J=[{field:"id",minWidth:200},{field:"name",width:150,flex:1},{field:"description",width:400,cellStyle:$,flex:2},{field:"type",width:150,cellRenderer:a=>e.jsx(W,{children:a.value})},{field:"createdDate",width:150,valueFormatter:a=>L(a.value,"dd/MM/yyyy")},{colId:"actions",headerName:"Actions",width:100,cellRenderer:F}],f={pageIndex:1,pageSize:20};function K(){const[a]=g(),{update:t}=p(),{data:s,refetch:r,isLoading:n}=H();return d.useEffect(()=>{const i=a.get("pageIndex"),c=a.get("pageSize");t({pageIndex:i??f.pageIndex.toString(),pageSize:c??f.pageSize.toString()})},[]),e.jsxs("div",{children:[e.jsx(O,{refetch:r}),e.jsx("div",{className:"h-[calc(100vh-210px)] my-2",children:e.jsx(G,{data:s?.items||[],isLoading:n,colDefs:J,rowHeight:80})}),e.jsx(_,{totalItems:s?.all||0})]})}function te(){return e.jsx("div",{children:e.jsxs(R,{defaultValue:"data",children:[e.jsxs(A,{children:[e.jsx(m,{value:"data",children:"Data"}),e.jsx(m,{value:"schema",children:"Schema"})]}),e.jsx(j,{value:"data",children:e.jsx(K,{})}),e.jsx(j,{value:"schema",children:"Data Schema"})]})})}export{te as default};
