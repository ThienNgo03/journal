import{u as h,j as e,S as N,t as b,B as d}from"./index-Ba1SLRPW.js";import{u as g,a as y,o as F,s as a,F as v,b as i,c as o,d as c,e as l,f as m}from"./zod-DkTte4Sq.js";import{I as u}from"./input-B0mGU3-H.js";import{T as E}from"./textarea-D1nPm8SG.js";import{p as S}from"./index-otjVXVq-.js";import{u as w}from"./useMutation-CE6Q-hYt.js";const C=F({name:a().min(1,"Name is required"),description:a().min(1,"Description is required"),type:a().min(1,"Type is required")});function T(){const s={name:"",description:"",type:""};return{form:g({resolver:y(C),defaultValues:s})}}async function q(s){const t=await S.post("/exercises",s);if(t.status!==201)throw new Error(`Error creating exercise: ${t.statusText}`);return t.data}function I(){return w({mutationFn:q,mutationKey:["create-exercise"]})}function P(){const{form:s}=T(),{mutate:t,isPending:n}=I(),j=h();function p(r){t(r,{onSuccess(){j(-1)},onError(x){b.error("Error creating exercise",{description:x instanceof Error?x.message:"Unknown error"})}})}function f(){s.reset()}return e.jsxs(e.Fragment,{children:[n&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx(N,{className:"size-8 text-primary"}),e.jsx("span",{className:"text-primary",children:"Submitting..."})]})]}),e.jsx(v,{...s,children:e.jsxs("form",{id:"create",onSubmit:s.handleSubmit(p),onReset:f,className:"space-y-4 grid grid-cols-2 gap-x-4",children:[e.jsx(i,{control:s.control,name:"name",render:({field:r})=>e.jsxs(o,{className:"self-start",children:[e.jsxs(c,{children:["Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(u,{disabled:n,...r})}),e.jsx(m,{})]})}),e.jsx(i,{control:s.control,name:"type",render:({field:r})=>e.jsxs(o,{className:"self-start",children:[e.jsxs(c,{children:["Type",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(u,{disabled:n,...r})}),e.jsx(m,{})]})}),e.jsx(i,{control:s.control,name:"description",render:({field:r})=>e.jsxs(o,{className:"col-span-2",children:[e.jsxs(c,{children:["Description",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(l,{children:e.jsx(E,{disabled:n,...r})}),e.jsx(m,{})]})})]})})]})}function V(){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Create Exercise Page"}),e.jsxs("div",{children:[e.jsx(d,{form:"create",type:"reset",variant:"outline",children:"Reset"}),e.jsx(d,{form:"create",type:"submit",className:"ml-2",children:"Submit"})]})]}),e.jsx(P,{})]})}export{V as default};
