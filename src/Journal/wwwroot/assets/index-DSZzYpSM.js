import{q as x,j as e,h as g,p as j,al as y,am as v,an as N,ao as w,ap as b,aq as k,B as F}from"./index-Ba1SLRPW.js";import{u as C,a as L,F as S,b as o,c,d as l,e as i,f as d,o as I,s as m}from"./zod-DkTte4Sq.js";import{I as u}from"./input-B0mGU3-H.js";import{p as _}from"./index-otjVXVq-.js";import{u as q}from"./useMutation-CE6Q-hYt.js";/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],E=x("circle-alert",A);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],M=x("mail",P),T=j("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function V({className:s,variant:t,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:g(T({variant:t}),s),...r})}function D({className:s,...t}){return e.jsx("div",{"data-slot":"alert-description",className:g("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}async function z(s){const t=await _.post("/authentication/login",s);if(t.status!==201)throw new Error(`Error logging in: ${t.statusText}`);return t.data}function B(){return q({mutationFn:z,mutationKey:["login"]})}const $=I({account:m().email("Account không hợp lệ"),password:m().min(6,"Mật khẩu phải có ít nhất 6 ký tự")});function O(){const s=C({resolver:L($),defaultValues:{account:"",password:""}}),{mutate:t,isPending:r,isError:h,error:p}=B(),f=a=>{t(a,{onSuccess:n=>{localStorage.setItem("token",n.token),console.log("Login successful!",n),window.location.href="/"},onError:n=>{console.error("Login failed:",n)}})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(y,{className:"w-full max-w-md",children:[e.jsxs(v,{className:"space-y-1",children:[e.jsx(N,{className:"text-2xl font-bold text-center",children:"Sign In"}),e.jsx(w,{className:"text-center",children:"Enter your account and password to sign in to the system"})]}),e.jsxs(b,{children:[e.jsx(S,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(f),className:"space-y-4",children:[h&&e.jsxs(V,{variant:"destructive",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx(D,{children:p?.message||"Login failed. Please check your account and password."})]}),e.jsx(o,{control:s.control,name:"account",render:({field:a})=>e.jsxs(c,{children:[e.jsx(l,{children:"Account"}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:"name@example.com",type:"email",className:"pl-10",...a})]})}),e.jsx(d,{})]})}),e.jsx(o,{control:s.control,name:"password",render:({field:a})=>e.jsxs(c,{children:[e.jsx(l,{children:"Password"}),e.jsx(i,{children:e.jsxs("div",{className:"relative",children:[e.jsx(k,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(u,{placeholder:"••••••••",type:"password",className:"pl-10",...a})]})}),e.jsx(d,{})]})}),e.jsx(F,{type:"submit",className:"w-full",disabled:r,children:r?"Processing...":"Sign In"})]})}),e.jsxs("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"Don't have an account?"}),e.jsxs("p",{className:"mt-1",children:["Please contact ",e.jsx("span",{className:"font-semibold text-foreground",children:"Thiên Ngố"})," or ",e.jsx("span",{className:"font-semibold text-foreground",children:"Việt Tồ"})," to request access."]}),e.jsx("p",{className:"mt-1 text-xs",children:"Admins will verify and notify you when your account is ready."})]})]})]})})}export{O as default};
